{% schema %}
{
  "name": "Product Collection",
  "settings": [
    {
      "type": "collection",
      "id": "selected_collection",
      "label": "Select Collection"
    }
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "Tab",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Tab Text"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Tab Link"
        },
        {
          "type": "checkbox",
          "id": "active",
          "label": "Set as Active"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Collection",
      "blocks": [
        {
          "type": "tab",
          "settings": {
            "text": "All",
            "url": "#",
            "active": true
          }
        },
        {
          "type": "tab",
          "settings": {
            "text": "Range Rover",
            "url": "#",
            "active": false
          }
        },
        {
          "type": "tab",
          "settings": {
            "text": "Discovery",
            "url": "#",
            "active": false
          }
        },
        {
          "type": "tab",
          "settings": {
            "text": "Defender",
            "url": "#",
            "active": false
          }
        }
      ]
    }
  ]
}
{% endschema %}


{% assign collection = collections[section.settings.selected_collection] %}
<div class="page-width">
<div class="range-rover-section">

  <!-- Filters and Sorting Bar -->
  <div class="top-bar-filter">
<div class="tabs">
  {% for block in section.blocks %}
    {% if block.type == 'tab' %}
      <a href="{{ block.settings.url }}" class="tab {% if block.settings.active %}active{% endif %}">
        {{ block.settings.text }}
      </a>
    {% endif %}
  {% endfor %}
</div>

    <div class="sort-dropdown">
      
      <select id="sort_by">
        <option value="">Sort by</option>
        <option value="best-selling">Best Selling</option>
        <option value="price-asc">Price, Low to High</option>
        <option value="price-desc">Price, High to Low</option>
        <option value="title-asc">Alphabetically, A-Z</option>
        <option value="title-desc">Alphabetically, Z-A</option>
        <option value="created-desc">Date, New to Old</option>
        <option value="created-asc">Date, Old to New</option>
      </select>
    </div>
  </div>

  {% if collection and collection.products.size > 0 %}
    <div class="product-grid">
      {% for product in collection.products %}
        <div class="product-card" data-type="{{ product.type | downcase }}">
          {% if product.available %}
            <div class="status available">Available</div>
          {% else %}
            <div class="status sold">Sold</div>
          {% endif %}

          <div class="image">
            <a href="{{ product.url }}">
              <img src="{{ product.featured_image | img_url: 'medium' }}" alt="{{ product.title }}">
            </a>
          </div>

          <h3 class="product-title">{{ product.title }}</h3>

          <div class="product-details">
            <p><strong>Engine:</strong> {{ product.metafields.custom.engine }}</p>
            <p><strong>Transmission:</strong> {{ product.metafields.custom.transmission }}</p>
            <p><strong>Mileage:</strong> {{ product.metafields.custom.mileage }}</p>
            <p><strong>Misc.:</strong> {{ product.metafields.custom.misc }}</p>
            <p><strong>Heritage:</strong> {{ product.metafields.custom.heritage }}</p>
          </div>

          {% if product.available %}
            <a href="{{ product.url }}" class="view-btn">View Full Listing</a>
          {% endif %}
        </div>
      {% endfor %}
    </div>
    <p class="results-count">Showing {{ collection.products.size }} of {{ collection.products.size }} results</p>
  {% else %}
    <p>No products found in this collection.</p>
  {% endif %}
</div>
</div>
<style>

.top-bar-filter {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  flex-wrap: wrap;
}

.tab.active {
  background: #628952;
  color: #fff;
}



</style>
