{% schema %}
{
  "name": "Home Product Collection",
  "settings": [],
  "blocks": [
    {
      "type": "product_card",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select product"
        }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [{
    "name": "Home Product Collection"
  }]
}
{% endschema %}

{% stylesheet %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css">

.swiper {
  padding: 30px 0;
}
.swiper-slide {
  height: auto;
}

.product-card {
  perspective: 1000px;
  height: 100%;
}
.flip-card {
  width: 100%;
  height: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
  position: relative;
}
.flip-card:hover {
  transform: rotateY(180deg);
}
.flip-card-front,
.flip-card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border: 1px solid #e1e1e1;
  border-radius: 8px;
  overflow: hidden;
  background-color: #fff;
}
.flip-card-front {
  z-index: 2;
}
.flip-card-back {
  transform: rotateY(180deg);
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 20px;
  text-align: center;
}
.flip-card-back .btn {
  margin-top: 10px;
  display: inline-block;
  background: #000;
  color: #fff;
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 4px;
}
.product-image img {
  width: 100%;
  display: block;
}
.product-title {
  font-size: 16px;
  font-weight: bold;
  padding: 10px;
  text-align: center;
}
{% endstylesheet %}

<div class="swiper mySwiper">
  <div class="swiper-wrapper">
    {% for block in section.blocks %}
      {% assign product = all_products[block.settings.product] %}
      {% if product %}
      <div class="swiper-slide product-card">
        <div class="flip-card">
          <div class="flip-card-front">
            <div class="product-image">
              <img src="{{ product.featured_image | img_url: 'medium' }}" alt="{{ product.title }}">
            </div>
            <div class="product-title">
              {{ product.title }}
            </div>
          </div>
          <div class="flip-card-back">
            <div class="product-details">
              <p>{{ product.description | strip_html | truncate: 100 }}</p>
              <p><strong>{{ product.price | money }}</strong></p>
              <a href="{{ product.url }}" class="btn">View Product</a>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{% javascript %}
<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    new Swiper('.mySwiper', {
      slidesPerView: 1,
      spaceBetween: 20,
      breakpoints: {
        768: {
          slidesPerView: 1
        },
        1024: {
          slidesPerView: 2
        }
      }
    });
  });
</script>
{% endjavascript %}
